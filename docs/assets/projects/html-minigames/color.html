<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Color</title>
    <style>
			
        html{
			height: auto;
            margin: 0;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' %3E%3Cpolygon fill='%23f0f0f0' points='0 0 20 0 20 20 0 20' /%3E%3Cpolygon fill='%23c0c0c0' points='0 0 10 0 10 10 0 10' /%3E%3Cpolygon fill='%23c0c0c0' points='10 10 20 10 20 20 10 20' /%3E%3C/svg%3E");
            background-repeat: repeat; 
            background-size: 30px;
            font-family: Arial, Helvetica, sans-serif
        }
      
        body {
			margin: 0; 
			height: auto;
            min-height: 100vh;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 100'%3E%3Cpolygon fill='%2300000033' points='40 50 20 16 0 50 90 50 70 16 50 50'/%3E%3Cpolygon fill='%2300000066' points='40 50 20 16 30 50 90 50 70 16 80 50'/%3E%3Cpolygon fill='%2300000099' points='10 50 -5 25 -20 50 25 50 10 25 -5 50 60 50 45 25 30 50 100 50 85 25 70 50'/%3E%3Cpolygon fill='%23000000cc' points='10 50 -5 25 0 50 25 50 10 25 15 50 60 50 45 25 50 50 100 50 85 25 90 50'/%3E%3Cpolygon fill='%2300000088' points='30 50 20 33 10 50 5 50 -5 33 -15 50 75 50 65 33 55 50 105 50 95 33 85 50 55 50 45 33 35 50'/%3E%3Cpolygon fill='%2300000011' points='75 50 65 33 70 50 30 50 20 33 25 50 5 50 -5 33 0 50 105 50 95 33 100 50 55 50 45 33 50 50'/%3E%3C/svg%3E") ;
            background-color: #000;
            background-repeat: repeat-x;
            background-attachment: fixed;
            background-size: 100vh;
        }  
        #menu{
            display:flex
        }
        
        .colorMod{
            background-color:#555;
            color:white;
            float:left;
            border:none;
            outline:none;
            cursor:pointer;
            padding:0;
            font-size:17px;
            width:20%;
            height:60px
        }
        .colorMod:hover{
            background-color:#777
        }
        .tabcontent{
            color:white;
            display:inline;
            padding:0
        }
        .bar{
            height:50px;
            width:100%;
            margin:20px 0 0;
            display:inline-flex
        }
        .bar .barTitle,.bar .barValue,.bar .barSlider{
            width:10%;
            display:inline-block;
            font-size:20pt;
            padding:0;
            color:black;
            margin:auto
        }
        .bar .barSlider{
            width:79%;
            -webkit-appearance:none;
            height:30px;
            background:#00000000;
            outline:none;
            opacity:.5
        }
        .bar .barValue{
            background-color:#00000000;
            border:0;
            text-align:end
        }
        #ColorClipBoard td{
            text-align:left;
            font-size:20pt;
            background-color:#ffffff66;
            margin:10px 0;
            width:33%
        }
        #ColorClipBoard textarea{
            resize:none;
            text-align:left;
            font-size:20pt;
            height:41px;
            background-color:#00000000;
            border:0;
            width:100%
        }
        #ColorClipBoard,#ColorClipBoard th,#ColorClipBoard td{
            padding:5px;
            border-collapse:collapse
        }
        #ColorClipBoard{
            font-family:Arial,Helvetica,sans-serif;
            width:100%;
            padding:0;
            margin:20px 0 0
        }
        #Custom{
            background-color:#ffffff44;
            width:80%;
            margin:20px auto 0;
            display:flex;
            border:0
        }
        #inputColor,#colorMode,#Guess input, #Guess span{
            text-align:center;
            color:#000000;
            font-size:30px;
            width:50%;
            padding:0;
            border:0;
            background-color:#ffffff44;
        }
        #colorGuess{
            position: relative;
            top:0;
            width:100%;
            left:0;
            padding-bottom: 130px;
        }
        #colorGuess td{
            width: 33%;
        }
        
        #colorGuess td *, #Custom *{
            width: 100%;
            display: inline-block;
            padding: 20px 0;
        }
        #colorMode {
            width:100%;
        }

    </style>
   
</head>

<body width=100%>
    <div id="menu">
        <button class="colorMod" onclick="openPage('RGB', this)">RGB</button>
        <button class="colorMod" onclick="openPage('HSL', this)">HSL</button>
        <button class="colorMod" onclick="openPage('CMYK', this)">CMYK</button>
        <button class="colorMod" onclick="openPage('Custom', this)">Custom</button>
        <button class="colorMod" onclick="openPage('Guess', this)" id="defaultOpen">Guess game</button>
    </div>
        
    <div id="RGB" class="tabcontent">
        <div class="bar">
            <label class="barTitle">Red</label>
            <input id="redSlider" type="range" min="0" max="255" value="255" class="barSlider" oninput="ChangeValue(this, 'redValue')" />
            <input id="redValue" type="number" min="0" max="255" value="255" class="barValue"  onchange="ChangeValue(this, 'redSlider')" />
        </div>
        <div class="bar">
            <label class="barTitle">Green</label>
            <input id="greenSlider" type="range" min="0" max="255" value="255" class="barSlider" oninput="ChangeValue(this, 'greenValue')" />
            <input id="greenValue" type="number" min="0" max="255" value="255" class="barValue"  onchange="ChangeValue(this, 'greenSlider')" />
        </div>   
        <div class="bar" >
            <label class="barTitle">Blue</label>
            <input id="blueSlider" type="range" min="0" max="255" value="255" class="barSlider" oninput="ChangeValue(this, 'blueValue')" />
            <input id="blueValue" type="number" min="0" max="255" value="255" class="barValue"  onchange="ChangeValue(this, 'blueSlider')" />
        </div> 
        <div class="bar">
            <label class="barTitle">Alpha</label>
            <input id="alphaSlider1" type="range" min="0" max="255" value="255" class="barSlider" oninput="ChangeValue(this, 'alphaValue1')" />
            <input id="alphaValue1" type="number" min="0" max="255" value="255" class="barValue"  onchange="ChangeValue(this, 'alphaSlider1')" />
        </div>  
    </div>

    <div id="HSL" class="tabcontent">
        <div class="bar">
            <label class="barTitle">Hue</label>
            <input id="hueSlider" type="range" min="0" max="360" value="0" class="barSlider" oninput="ChangeValue(this, 'hueValue')" />
            <input id="hueValue" type="number" min="0" max="360" value="0" class="barValue"  onchange="ChangeValue(this, 'hueSlider')" />
        </div>
        <div class="bar">
            <label class="barTitle">Saturation</label>
            <input id="saturationSlider" type="range" min="0" max="100" value="100" class="barSlider" oninput="ChangeValue(this, 'saturationValue')" />
            <input id="saturationValue" type="number" min="0" max="100" value="100" class="barValue"  onchange="ChangeValue(this, 'saturationSlider')" />
        </div>   
        <div class="bar">
            <label class="barTitle">Lightness</label>
            <input id="lightnessSlider" type="range" min="0" max="100" value="100" class="barSlider" oninput="ChangeValue(this, 'lightnessValue')" />
            <input id="lightnessValue" type="number" min="0" max="100" value="100" class="barValue"  onchange="ChangeValue(this, 'lightnessSlider')" />
        </div>
        <div class="bar">
            <label class="barTitle">Alpha</label>
            <input id="alphaSlider2" type="range" min="0" max="255" value="255" class="barSlider" oninput="ChangeValue(this, 'alphaValue2')" />
            <input id="alphaValue2" type="number" min="0" max="255" value="255" class="barValue"  onchange="ChangeValue(this, 'alphaSlider2')" />
        </div>  
    </div>

    <div id="CMYK" class="tabcontent">
        <div class="bar">
            <label class="barTitle">Cyan</label>
            <input id="cyanSlider" type="range" min="0" max="100" value="100" class="barSlider" oninput="ChangeValue(this, 'cyanValue')" />
            <input id="cyanValue" type="number" min="0" max="100" value="100" class="barValue"  onchange="ChangeValue(this, 'cyanSlider')" />
        </div>
        <div class="bar">
            <label class="barTitle">Magenta</label>
            <input id="magentaSlider" type="range" min="0" max="100" value="100" class="barSlider" oninput="ChangeValue(this, 'magentaValue')" />
            <input id="magentaValue" type="number" min="0" max="100" value="100" class="barValue"  onchange="ChangeValue(this, 'magentaSlider')" />
        </div>   
        <div class="bar">
            <label class="barTitle">Yellow</label>
            <input id="yellowSlider" type="range" min="0" max="100" value="100" class="barSlider" oninput="ChangeValue(this, 'yellowValue')" />
            <input id="yellowValue" type="number" min="0" max="100" value="100" class="barValue"  onchange="ChangeValue(this, 'yellowSlider')" />
        </div>  
        <div class="bar">
            <label class="barTitle">Black</label>
            <input id="blackSlider" type="range" min="0" max="100" value="100" class="barSlider" oninput="ChangeValue(this, 'blackValue')" />
            <input id="blackValue" type="number" min="0" max="100" value="100" class="barValue"  onchange="ChangeValue(this, 'blackSlider')" />
        </div>  
        <div class="bar">
            <label class="barTitle">Alpha</label>
            <input id="alphaSlider3" type="range" min="0" max="255" value="255" class="barSlider" oninput="ChangeValue(this, 'alphaValue3')" />
            <input id="alphaValue3" type="number" min="0" max="255" value="255" class="barValue"  onchange="ChangeValue(this, 'alphaSlider3')" />
        </div>
    </div>

    <div id="Custom" class="tabcontent">
        <input type="text" id="inputColor" oninput="InputColor(this)"/>
        <span id="colorMode"></span>
    </div>

    <div id="Guess" class="tabcontent">
        <table id="colorGuess">
            <tr>
                <td>
                    <input type="button" value="generate" onclick="Randomize()"> 
                </td>
                <td>
                    <input id="inputGuess" type="text" oninput="TestColorGuess(this)">
                </td>
                <td>
                    <input id="valide_btn" type="button" value="Valide" onclick="ValideColor()">
                </td>
            </tr>
            <tr>
                <td>
                    <span id="resultGuessRGB">RGB: 0%</span>
                </td>
                <td>
                    <span id="resultGuessHSL">HSL: 0%</span>
                </td>
                <td>
                    <span id="resultGuessCMYK">CMYK: 0%</span>
                </td>
            </tr>
            <tr style="height: 100%;"></tr>
        </table>
    </div>
    
    <table id="ColorClipBoard">
        <tr>
            <td>HEX:</td>
            <td onfocus="this.select()" onclick='ClipBoardColor(this)' id="ClipBoardHEX"></td>
            <td onfocus="this.select()" onclick='ClipBoardColor(this)' id="ClipBoardHEXA"></td>
        </tr>
        <tr>
            <td>Binaire:</td>
            <td onfocus="this.select()" colspan="2" onclick='ClipBoardColor(this)' id="ClipBoardBinaire"></td>
        </tr>
            
        <tr>
            <td>RGB:</td>
            <td onfocus="this.select()" onclick='ClipBoardColor(this)' id="ClipBoardRGB"></td>
            <td onfocus="this.select()" onclick='ClipBoardColor(this)' id="ClipBoardRGBA"></td>
        </tr>     
        <tr>
            <td>HSL:</td>
            <td onfocus="this.select()" onclick='ClipBoardColor(this)' id="ClipBoardHSL"></td>
            <td onfocus="this.select()" onclick='ClipBoardColor(this)' id="ClipBoardHSLA"></td>
        </tr>
        <tr>
            <td>CMYK:</td>
            <td onfocus="this.select()" colspan="2" onclick='ClipBoardColor(this)' id="ClipBoardCMYK"></td>
        </tr>
        <!--tr>
            <td>ClipBoard:</td>
            <td onfocus="this.select()" colspan="2" ><textarea readonly="readonly" id="ClipBoard"></textarea></td>
        </tr-->
    </table>
    <script>
    var colorMode= "RGB";
    var color = new _Color();
    var randomColor = new _Color();
    var sliders = document.getElementsByClassName("barSlider");
    var values = document.getElementsByClassName("barValue");
    window.onload = function() {
        //navigator.clipboard.readText().then(text => {document.getElementsByClassName("ClipBoard").innerHTML=text;1});
        var bars = document.getElementsByClassName("bar");
        setBackgroundGradient(bars[0], ['#fff6', '#000', '#f00', '#fff6']);
        setBackgroundGradient(bars[1], ['#fff6', '#000', '#0f0', '#fff6']);
        setBackgroundGradient(bars[2], ['#fff6', '#000', '#00f', '#fff6']);
        setBackgroundGradient(bars[4], ['#fff6', '#f00', '#ff0', '#0f0', '#0ff', '#00f', '#f0f', '#f00', '#fff6']);
        setBackgroundGradient(bars[5], ['#fff6', '#888', '#f00', '#fff6']);
        setBackgroundGradient(bars[6], ['#fff6', '#000', '#f00', '#fff', '#fff6']);
        setBackgroundGradient(bars[8], ['#fff6', '#fff', '#0ff', '#fff6']);
        setBackgroundGradient(bars[9], ['#fff6', '#fff', '#f0f', '#fff6']);
        setBackgroundGradient(bars[10], ['#fff6', '#fff', '#ff0', '#fff6']);
        setBackgroundGradient(bars[11], ['#fff6', '#fff', '#000', '#fff6']);
        setBackgroundGradient(bars[3], ['#fff6', '#0000', '#fff', '#fff6']);
        setBackgroundGradient(bars[7], ['#fff6', '#0000', '#fff', '#fff6']);
        setBackgroundGradient(bars[12], ['#fff6', '#0000', '#fff', '#fff6']);
        WriteColor("#888888");
        displayColor();
    };
    function ClipBoardColor(element){
        var c = document.getElementById("ClipBoard");
        c.innerHTML=element.innerText;
        c.focus();
        c.setSelectionRange(0, element.innerText.length);
        document.execCommand('copy');
        c.setSelectionRange(element.innerText.length, element.innerText.length);
    }
    function setBackgroundGradient(my, colors)
    {  
        var first = colors.shift();
        var second = colors.shift();
        var last = colors.pop();
        var beforelast = colors.pop();
        var gradient = "-webkit-linear-gradient(0deg, "+first+" 9%, "+second+" 12%, "+ (colors.length>0?colors.join(", ")+", ":"") +beforelast+" 88%, "+last+" 91%)";
        
        my.style.backgroundImage = gradient;
    }
    function ChangeValue(source, destination){
        document.getElementById(destination).value = source.value;
        updateColor();
    }
    function updateColor(){
        switch(colorMode){
            case "RGB":
                updateColorValue([document.getElementById("redSlider").value,document.getElementById("greenSlider").value,document.getElementById("blueSlider").value], colorMode, document.getElementById("alphaSlider1").value);           
                break;
            case "HSL":
                updateColorValue([document.getElementById("hueSlider").value, document.getElementById("saturationSlider").value, document.getElementById("lightnessSlider").value], colorMode, document.getElementById("alphaSlider2").value);
            break;
            case "CMYK":
                updateColorValue([document.getElementById("cyanSlider").value,document.getElementById("magentaSlider").value,document.getElementById("yellowSlider").value, document.getElementById("blackSlider").value],colorMode, document.getElementById("alphaSlider3").value);
            break;
        }
        displayColor();
    }
    function updateSliders(){
        switch(colorMode){
            case "RGB":
                document.getElementById("redSlider").value = color.red;
                document.getElementById("greenSlider").value = color.green;
                document.getElementById("blueSlider").value = color.blue; 
                document.getElementById("alphaSlider1").value = color.alpha;
                document.getElementById("redValue").value = color.red;
                document.getElementById("greenValue").value = color.green;
                document.getElementById("blueValue").value = color.blue;
                document.getElementById("alphaValue1").value = color.alpha;
            break;
            case "HSL":
                document.getElementById("hueSlider").value = color.hue;
                document.getElementById("saturationSlider").value = color.saturation;
                document.getElementById("lightnessSlider").value = color.lightness;
                document.getElementById("alphaSlider2").value = color.alpha;
                document.getElementById("hueValue").value = color.hue;
                document.getElementById("saturationValue").value = color.saturation;
                document.getElementById("lightnessValue").value = color.lightness;
                document.getElementById("alphaValue2").value = color.alpha;
            break;
            case "CMYK":
                document.getElementById("cyanSlider").value = color.cyan;
                document.getElementById("magentaSlider").value = color.magenta;
                document.getElementById("yellowSlider").value = color.yellow;
                document.getElementById("blackSlider").value = color.black;
                document.getElementById("alphaSlider3").value = color.alpha;
                document.getElementById("cyanValue").value = color.cyan;
                document.getElementById("magentaValue").value = color.magenta;
                document.getElementById("yellowValue").value = color.yellow;
                document.getElementById("blackValue").value = color.black;
                document.getElementById("alphaValue3").value = color.alpha;
            break;
            case "Custom":
                var e = document.getElementById("inputColor").value;
                document.getElementById("inputColor").focus();
                document.getElementById("inputColor").value = "";
                document.getElementById("inputColor").value = e;
            break;
        }
    }
    function updateColorValue(values, mode, alpha){
        var rgb = [0,0,0], hsl= [0,0,0], cmyk= [0,0,0,0];
        switch(mode)
        {
            case "RGB":
            case "Custom" :
                rgb = values;
                hsl = _RGBtoHSL(values);
                cmyk = _RGBtoCMYK(values);
            break;
            case "HSL":
                rgb = _HSLtoRGB(values);
                hsl = values;
                cmyk = _RGBtoCMYK([color.red, color.green, color.blue]);
            break;
            case "CMYK":
                rgb = _CMYKtoRGB(values);
                hsl = _RGBtoHSL([color.red, color.green, color.blue]);
                cmyk = values;
            break;
        }
        color.red = Math.round(rgb[0]);
        color.green = Math.round(rgb[1]);
        color.blue = Math.round(rgb[2]);
        color.hue = Math.round(hsl[0]);
        color.saturation = Math.round(hsl[1]);
        color.lightness = Math.round(hsl[2]);
        color.cyan = Math.round(cmyk[0]);
        color.magenta = Math.round(cmyk[1]);
        color.yellow = Math.round(cmyk[2]);
        color.black = Math.round(cmyk[3]);
        color.alpha = Math.round(alpha);
        //console.log(color.red+", "+color.green+", "+color.blue+", "+color.hue +", "+color.saturation+", "+color.lightness+", "+color.cyan+", "+color.magenta+", "+color.yellow+", "+color.black+", "+color.alpha);
    }
    function displayColor(){

        document.body.style.backgroundColor="rgba("+color.red+", "+color.green+","+color.blue+","+color.alpha/255+")";
        document.getElementById("ClipBoardHEX").innerHTML= "#"+("00" + color.red.toString(16)).slice(-2)+("00"+color.green.toString(16)).slice(-2)+("00"+color.blue.toString(16)).slice(-2);
        document.getElementById("ClipBoardHEXA").innerHTML="#"+("00" + color.red.toString(16)).slice(-2)+("00"+color.green.toString(16)).slice(-2)+("00"+color.blue.toString(16)).slice(-2)+("00"+color.alpha.toString(16)).slice(-2);
        document.getElementById("ClipBoardBinaire").innerHTML=("00000000"+color.red.toString(2)).slice(-8)+" "+("00000000"+color.green.toString(2)).slice(-8)+" "+("00000000"+color.blue.toString(2)).slice(-8);
        document.getElementById("ClipBoardRGB").innerHTML="rgb("+color.red+", "+color.green+", "+color.blue+")";
        document.getElementById("ClipBoardRGBA").innerHTML="rgba("+color.red+", "+color.green+", "+color.blue+", "+color.alpha+")";
        document.getElementById("ClipBoardHSL").innerHTML="hsl("+color.hue+", "+color.saturation+", "+color.lightness+")";
        document.getElementById("ClipBoardHSLA").innerHTML="hsla("+color.hue+", "+color.saturation+", "+color.lightness+", "+Math.round(color.alpha/2.55)+")";
        document.getElementById("ClipBoardCMYK").innerHTML="cmyk("+color.cyan+", "+color.magenta+", "+color.yellow+", "+color.black+")";
    }
    function openPage(pageName,element,color) {
        colorMode=pageName;
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablink");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].style.backgroundColor = "";
        }
        document.getElementById(pageName).style.display = "block";
        element.style.backgroundColor = color;
        if(pageName == "Guess"){
            document.getElementById("ColorClipBoard").style.display = "none";
        }else{
            document.getElementById("ColorClipBoard").style.display = "";
        }
        updateSliders();
    }
    function WriteColor(input){
        if (/(^#[0-9A-F]{3}$)/i.test(input)){
            document.getElementById("colorMode").innerHTML="HEX (3)";
            updateColorValue([parseInt(input[1]+"0",16),parseInt(input[2]+"0",16),parseInt(input[3]+"0",16)], "RGB", 255);
        }
        else if (/(^#[0-9A-F]{6}$)/i.test(input)){//hex
            document.getElementById("colorMode").innerHTML="HEX";
            updateColorValue([parseInt(input.slice(1,3),16),parseInt(input.slice(3,5),16),parseInt(input.slice(5,7),16)], "RGB", 255);
        }
        else if(/(^#[0-9A-F]{4}$)/i.test(input)){
            document.getElementById("colorMode").innerHTML="HEXA (4)";
            updateColorValue([parseInt(input[1]+"0",16),parseInt(input[2]+"0",16),parseInt(input[3]+"0",16)], "RGB", parseInt(input[4]+input[4],16));
        }
        else if(/(^#[0-9A-F]{8}$)/i.test(input)){//hexa
            document.getElementById("colorMode").innerHTML="HEXA";
            updateColorValue([parseInt(input.slice(1,3),16),parseInt(input.slice(3,5),16),parseInt(input.slice(5,7),16)], "RGB", parseInt(input.slice(7,9),16));
        }
        else if(/rgb\(\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*,\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*,\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*\)$/.test(input)){//rgb
            document.getElementById("colorMode").innerHTML="RGB";
            input = input.slice(4, -1);
            var rgbString = input.split(",");
            var rgb = [];
            rgbString.forEach(element => {
                rgb.push( parseInt(element.trim()));
            });
            updateColorValue([rgb[0],rgb[1],rgb[2]], "RGB", 255);
        }
        else if(/rgba\(\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*,\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*,\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*,\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*\)$/.test(input)){//rgba
            document.getElementById("colorMode").innerHTML="RGBA";
            input = input.slice(5, -1);
            var rgbaString = input.split(",");
            var rgba = [];
            rgbaString.forEach(element => {
                rgba.push( parseInt(element.trim()));
            });
            updateColorValue([rgba[0],rgba[1],rgba[2]], "RGB", rgba[3]);
        }
        else if(/hsl\(\s*(0|[1-9]\d?|[12]\d\d|3[0-5]\d)\s*,\s*((0|[1-9]\d?|100)%)\s*,\s*((0|[1-9]\d?|100)%)\s*\)$/.test(input)){//hsl
            document.getElementById("colorMode").innerHTML="HSL";
            input = input.slice(4, -1);
            var hslString = input.split(",");
            var hsl = [];
            hslString.forEach(element => {
                hsl.push( parseInt(element.trim()));
            });
            updateColorValue([hsl[0],hsl[1],hsl[2]], "HSL", 255);
        }
        else if(/hsla\(\s*(0|[1-9]\d?|[12]\d\d|3[0-5]\d)\s*,\s*((0|[1-9]\d?|100)%)\s*,\s*((0|[1-9]\d?|100)%)\s*,\s*((0(\.\d+)?|1(\.0+){4})\s*\))$/.test(input)){//hsla
            document.getElementById("colorMode").innerHTML="HSLA";
            input = input.slice(5, -1);
            var hslaString = input.split(",");
            var hsla = [];
            hslaString.forEach(element => {
                hsla.push( parseInt(element.trim()));
            });
            updateColorValue([hsla[0],hsla[1],hsla[2]], "HSL", hsla[3]);
        }
        else if(/cmyk\(\s*((0|[1-9]\d?|100)%)\s*,\s*((0|[1-9]\d?|100)%)\s*,\s*((0|[1-9]\d?|100)%)\s*,\s*((0|[1-9]\d?|100)%)\s*\)$/.test(input)){//cmyk
            document.getElementById("colorMode").innerHTML="CMYK";
            input = input.slice(5, -1);
            var cmykString = input.split("%,");
            var cmyk = [];
            cmykString.forEach(element => {
                cmyk.push( parseInt(element.trim()));
            });
            updateColorValue([cmyk[0],cmyk[1],cmyk[2],cmyk[3]], "CMYK", 255);
           
        }
        else{
            console.log("color: "+ input+" is not a color" );
            return false;
        }
        return true;
        /*
        var rgb = document.body.style.backgroundColor;
        var a = 0;
        if(rgb.startsWith("rgba")){
            rgb = rgb.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d|.]+)\)$/)
            rgb = [parseInt(rgb[1]),parseInt(rgb[2]),parseInt(rgb[3])];
            a=parseInt(rgb[4]);
        }else{
            rgb = rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/)
            rgb = [parseInt(rgb[1]),parseInt(rgb[2]),parseInt(rgb[3])];
            a = 255;
        }      
        updateColorValue(rgb, "Custom", a);
        return rgb;*/
    }
    function TestColor(input) {
        var test = ((/(^#[0-9A-F]{3}$)/i.test(input))||
        (/(^#[0-9A-F]{6}$)/i.test(input))||
        (/(^#[0-9A-F]{4}$)/i.test(input))||
        (/(^#[0-9A-F]{8}$)/i.test(input))||
        (/rgb\(\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*,\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*,\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*\)$/.test(input))||
        (/rgba\(\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*,\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*,\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*,\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])%?\s*\)$/.test(input))||
        (/hsl\(\s*(0|[1-9]\d?|[12]\d\d|3[0-5]\d)\s*,\s*((0|[1-9]\d?|100)%)\s*,\s*((0|[1-9]\d?|100)%)\s*\)$/.test(input))||
        (/hsla\(\s*(0|[1-9]\d?|[12]\d\d|3[0-5]\d)\s*,\s*((0|[1-9]\d?|100)%)\s*,\s*((0|[1-9]\d?|100)%)\s*,\s*((0(\.\d+)?|1(\.0+){4})\s*\))$/.test(input))||
        (/cmyk\(\s*((0|[1-9]\d?|100)%)\s*,\s*((0|[1-9]\d?|100)%)\s*,\s*((0|[1-9]\d?|100)%)\s*,\s*((0|[1-9]\d?|100)%)\s*\)$/.test(input)));
        
        return test;
    }
    function _RGBtoHSL(RGB) {
        var HSL = [0, 0, 0];

        var r = RGB[0] / 255;
        var g = RGB[1] / 255;
        var b = RGB[2] / 255;

        var max = Math.max(r, g, b), min = Math.min(r, g, b);
        HSL[2] = (max + min) / 2;

        if (max == min) {
            HSL[0] = HSL[1] = 0;
        } else {
            var d = max - min;
            HSL[1] = HSL[2] > 0.5 ? d / (2 - max - min) : d / (max + min);

            switch (max) {
            case r: HSL[0] = (g - b) / d + (g < b ? 6 : 0); break;
            case g: HSL[0] = (b - r) / d + 2; break;
            case b: HSL[0] = (r - g) / d + 4; break;
            }

            HSL[0] *= 60;
        }
        HSL[2]*=100;
        HSL[1]*=100;
        return HSL;
    }
    function _HSLtoRGB(HSL) {
        var RGB = [0, 0, 0];

        var h = HSL[0] / 360;
        var s = HSL[1] / 100;
        var l = HSL[2] / 100;

        if (s == 0) {
            RGB[0] = RGB[1] = RGB[2] = l*255; // achromatic
        } else {
            function hue2rgb(p, q, t) {
            if (t < 0) t += 1;
            if (t > 1) t -= 1;
            if (t < 1/6) return p + (q - p) * 6 * t;
            if (t < 1/2) return q;
            if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
            return p;
            }

            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
            var p = 2 * l - q;

            RGB[0] = hue2rgb(p, q, h + 1/3)*255;
            RGB[1] = hue2rgb(p, q, h)*255;
            RGB[2] = hue2rgb(p, q, h - 1/3)*255;
        }

        return RGB;
    }
    function _RGBtoCMYK(RGB){
        var CMYK = [0, 0, 0, 0];

        r = RGB[0] / 255;
        g = RGB[1] / 255;
        b = RGB[2] / 255;

        CMYK[3] = Math.min( 1 - r, 1 - g, 1 - b );
        if (CMYK[3]==1){
            CMYK[0] = 0;
            CMYK[1] = 0;
            CMYK[2] = 0;
        }else{
            CMYK[0] = ( 1 - r - CMYK[3] ) / ( 1 - CMYK[3] );
            CMYK[1] = ( 1 - g - CMYK[3] ) / ( 1 - CMYK[3] );
            CMYK[2] = ( 1 - b - CMYK[3] ) / ( 1 - CMYK[3] );
            CMYK[1] = Math.round( CMYK[1] * 100 );
            CMYK[2] = Math.round( CMYK[2] * 100 );
            CMYK[0] = Math.round( CMYK[0] * 100 );
        }  
        CMYK[3] = Math.round( CMYK[3] * 100 );

        return CMYK;
    }
    function _CMYKtoRGB(CMYK){
        var RGB = [0, 0, 0];

        c = CMYK[0] / 100;
        m = CMYK[1] / 100;
        y = CMYK[2] / 100;
        k = CMYK[3] / 100;

        RGB[0] = 1 - Math.min( 1, c * ( 1 - k ) + k );
        RGB[1] = 1 - Math.min( 1, m * ( 1 - k ) + k );
        RGB[2] = 1 - Math.min( 1, y * ( 1 - k ) + k );

        RGB[0] = Math.round( RGB[0] * 255 );
        RGB[1] = Math.round( RGB[1] * 255 );
        RGB[2] = Math.round( RGB[2] * 255 );

        return RGB;
    }
    function _Color(){
        this.red = 0; 
        this.green = 0; 
        this.blue = 0; 
        this.hue = 0; 
        this.saturation = 0; 
        this.lightness = 0; 
        this.cyan = 0; 
        this.magenta = 0; 
        this.yellow = 0; 
        this.black = 100; 
        this.alpha = 255; 
    }
    function InputColor(input){
        document.getElementById("colorMode").innerHTML="Not a color!";
        if (TestColor(input.value)){
            WriteColor(input.value);
            displayColor();
        }
    }
    function Randomize(){
        values = [Math.floor(Math.random() * 256),Math.floor(Math.random() * 256),Math.floor(Math.random() * 256)];
     
        var hsl = _RGBtoHSL(values);
        var cmyk = _RGBtoCMYK(values);

        randomColor.red = values[0];
        randomColor.green = values[1];
        randomColor.blue = values[2];
        randomColor.hue = hsl[0]; 
        randomColor.saturation =hsl[1] ; 
        randomColor.lightness = hsl[2]; 
        randomColor.cyan = cmyk[0]; 
        randomColor.magenta = cmyk[1]; 
        randomColor.yellow = cmyk[2]; 
        randomColor.black = cmyk[3]; 
        randomColor.alpha = 255; 

        var stringColor = "rgba("+randomColor.red+", "+randomColor.green+", "+randomColor.blue+", "+randomColor.alpha+")";
        document.getElementById("colorGuess").style.background="-webkit-linear-gradient(-90deg, "+stringColor+" 50%, rgb(0,0,0,0) 100%)";
    }
    function TestColorGuess(input){
        if (TestColor(input.value)){
            document.getElementById("valide_btn").style.display = "inline-block";
        }else{
            document.getElementById("valide_btn").style.display = "none";
        }
    }
    function ValideColor(){
        WriteColor(document.getElementById("inputGuess").value);
        displayColor();
        difference = function(a,b, tot, number){return (100-(Math.abs(a-b)/tot)*100)/number;}
        changebase = function(value, digit){ return (Math.round(value*Math.pow(10, digit))/Math.pow(10, digit));}
        document.getElementById("resultGuessRGB").innerText = "RGB: "+changebase(difference(color.red, randomColor.red, 255,3)+difference(color.green, randomColor.green, 255,3)+difference(color.blue, randomColor.blue, 255,3), 3)+"%";
        document.getElementById("resultGuessHSL").innerText = "HSL: "+changebase(difference(color.hue, randomColor.hue, 360,3)+difference(color.saturation, randomColor.saturation, 100,3)+difference(color.lightness, randomColor.lightness, 100,3), 3)+"%";
        document.getElementById("resultGuessCMYK").innerText = "CMYK: "+changebase(difference(color.cyan, randomColor.cyan, 100,4)+difference(color.magenta, randomColor.magenta, 100,4)+difference(color.yellow, randomColor.yellow, 100,4)+difference(color.black, randomColor.black, 100,4),3 )+"%";
    }

    document.getElementById("defaultOpen").click();
    </script>
</body>

</html>